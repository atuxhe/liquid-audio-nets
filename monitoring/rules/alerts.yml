# Alert rules for liquid-audio-nets

groups:
  - name: liquid-audio-nets.rules
    rules:
      # Performance alerts
      - alert: HighInferenceLatency
        expr: inference_latency_ms > 25
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: "High inference latency detected"
          description: "Inference latency is {{ $value }}ms, exceeding 25ms threshold"

      - alert: LowThroughput
        expr: audio_samples_processed_per_second < 16000
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "Audio processing below real-time"
          description: "Processing only {{ $value }} samples/sec, below 16kHz real-time requirement"

      # Power consumption alerts
      - alert: HighPowerConsumption
        expr: power_consumption_mw > 3.0
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Power consumption above target"
          description: "Power consumption is {{ $value }}mW, exceeding 3mW threshold"

      # Memory alerts
      - alert: HighMemoryUsage
        expr: memory_usage_mb > 10
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: "High memory usage detected"
          description: "Memory usage is {{ $value }}MB, exceeding 10MB embedded target"

      # Model accuracy alerts
      - alert: LowModelAccuracy
        expr: model_accuracy < 0.90
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "Model accuracy degraded"
          description: "Model accuracy dropped to {{ $value }}, below 90% threshold"

      # Hardware alerts
      - alert: DeviceTemperatureHigh
        expr: device_temperature_celsius > 70
        for: 1m
        labels:
          severity: warning
        annotations:
          summary: "Device temperature high"
          description: "Device temperature is {{ $value }}°C, above 70°C threshold"

      - alert: DeviceOffline
        expr: up{job="embedded-device"} == 0
        for: 30s
        labels:
          severity: critical
        annotations:
          summary: "Embedded device offline"
          description: "Embedded device has been offline for more than 30 seconds"

      # Training alerts
      - alert: TrainingLossStagnant
        expr: increase(training_loss[10m]) < 0.01
        for: 30m
        labels:
          severity: warning
        annotations:
          summary: "Training loss not improving"
          description: "Training loss has not improved significantly in 30 minutes"

      - alert: ValidationAccuracyDropped
        expr: validation_accuracy < 0.85
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Validation accuracy dropped"
          description: "Validation accuracy is {{ $value }}, below 85% threshold"